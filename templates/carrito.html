{% extends "base.html" %} {% load static %}
<!-- Titulo -->
{% block title %} Tu carrito de la compra {% endblock %}
<!-- JavaScript -->
{% block extra_head %}
<script defer src="{% static 'js/cart/carrito-page.js'  %}">
</script>
{% endblock %} 

<!-- WARN: solo se muestra cuando hay uno solo -->
<!-- TODO: opcion de borrar -->

{% block content %}
<div class="container mx-auto p-6">
  <h3 class="text-2xl font-semibold mb-4">
    Este es tu carrito de la compra{% if user.is_authenticated %}, {{ user.get_username }}{% endif %}
  </h3>

  {% if piezas %}
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for pieza in piezas %}
    <div class="bg-white border border-gray-200 rounded-lg shadow-lg p-4">
      <img
        src="{{ pieza.imagen.url }}"
        alt="{{ pieza.titulo }}"
        class="w-full h-48 rounded-lg object-cover mb-4"
      />
      <h4 class="text-xl text-yellow-900 font-bold mb-2">{{ pieza.titulo }}</h4>
      <p class="text-gray-600">Precio: <b>{{ pieza.precio }}</b> $</p>
      <button
        class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded"
        onclick="removeFromCart('{{ pieza.id }}')"
      >
        Quitar del carrito
      </button>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="text-gray-700">Tu carrito está vacío.</p>
  {% endif %}

  <div class="mt-4">
    <a
      href="{% url 'homepage' %}"
      class="bg-yellow-700 hover:bg-yellow-600 text-white px-4 py-2 rounded"
    >
      Seguir comprando
    </a>
  </div>
</div>

{% endblock %}
